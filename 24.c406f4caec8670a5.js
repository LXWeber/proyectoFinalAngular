"use strict";(self.webpackChunkproyectoFinal=self.webpackChunkproyectoFinal||[]).push([[24],{24:(co,_,a)=>{a.r(_),a.d(_,{ColectivoAdminModule:()=>ao});var f=a(6895),Z=a(904),l=a(4006),m=a(9299),A=a(1741),T=a(4541),d=a(5412),o=a(4650),C=a(4345),x=a(9921),u=a(4859),r=a(7155),h=a(7392),b=a(7009);function F(t,i){1&t&&(o.TgZ(0,"th",14),o._uU(1,"ID"),o.qZA())}function U(t,i){if(1&t&&(o.TgZ(0,"td",15),o._uU(1),o.qZA()),2&t){const e=i.$implicit;o.xp6(1),o.Oqu(e.id)}}function q(t,i){1&t&&(o.TgZ(0,"th",14),o._uU(1,"Patente"),o.qZA())}function Y(t,i){if(1&t&&(o.TgZ(0,"td",15),o._uU(1),o.qZA()),2&t){const e=i.$implicit;o.xp6(1),o.Oqu(e.patente)}}function O(t,i){1&t&&(o.TgZ(0,"th",14),o._uU(1,"Asientos"),o.qZA())}function N(t,i){if(1&t&&(o.TgZ(0,"td",15),o._uU(1),o.qZA()),2&t){const e=i.$implicit;o.xp6(1),o.Oqu(e.cantidadAsientos)}}function I(t,i){1&t&&(o.TgZ(0,"th",14),o._uU(1,"Modelo"),o.qZA())}function P(t,i){if(1&t&&(o.TgZ(0,"td",15),o._uU(1),o.qZA()),2&t){const e=i.$implicit;o.xp6(1),o.Oqu(null==e.modelo?null:e.modelo.nombre)}}function J(t,i){1&t&&(o.TgZ(0,"th",14),o._uU(1,"Editar / Eliminar"),o.qZA())}function S(t,i){if(1&t){const e=o.EpF();o.TgZ(0,"td",15)(1,"button",16),o.NdJ("click",function(){const s=o.CHM(e).$implicit,p=o.oxw();return o.KtG(p.modificar(s))}),o.TgZ(2,"mat-icon"),o._uU(3,"edit"),o.qZA()(),o.TgZ(4,"button",17),o.NdJ("click",function(){const s=o.CHM(e).$implicit,p=o.oxw();return o.KtG(p.dialogoEliminar(s))}),o.TgZ(5,"mat-icon"),o._uU(6,"delete"),o.qZA()()()}}function k(t,i){1&t&&o._UZ(0,"tr",18)}function Q(t,i){1&t&&o._UZ(0,"tr",19)}const y=".header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.titulo[_ngcontent-%COMP%]{color:#131263}.mat-column-id[_ngcontent-%COMP%], .mat-column-cantidadAsientos[_ngcontent-%COMP%], .mat-column-modelo[_ngcontent-%COMP%], .mat-column-acciones[_ngcontent-%COMP%]{text-align:center}.mat-column-id[_ngcontent-%COMP%]{border-right:1px solid currentColor;width:0;font-size:small;padding:0 10px 0 5px}.dialogo[_ngcontent-%COMP%]{border:1px solid #630a03;background-color:#f2e4e2;border-radius:5px}.dialog-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.dialog-icon[_ngcontent-%COMP%]{font-size:350%;margin-top:20px;height:max-content;width:max-content}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.fila[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin:auto}.col1[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:5px}.col2[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1em;gap:5px}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around}";let B=(()=>{class t{constructor(e,n,c,s){this.colectivoService=e,this.modeloService=n,this.router=c,this.dialog=s,this.displayedColumns=["id","patente","cantidadAsientos","modelo","acciones"],this.dataSource=[],this.listaColectivos=[],this.modeloSeleccionado=null}ngOnInit(){this.cargar()}cargar(){this.colectivoService.findAll().subscribe(e=>{this.dataSource=e.body?.map(n=>{const c=new A._(n.id,n.patente,n.cantidadAsientos,n.modeloId);return this.findModelo(c),c})},e=>{console.log("Ha ocurrido un error al cargar")})}findModelo(e){this.modeloService.findOne(e.modeloId).subscribe(n=>{n.body&&(e.modelo=new T.Z(n.body.id,n.body.nombre,n.body.marca))})}modificar(e){this.router.navigate(["layout","colectivos","modif",e.id])}crear(){this.router.navigate(["layout","colectivos","crear"])}dialogoEliminar(e){this.dialog.open(D,{data:{id:e.id,patente:e.patente,cantidadAsientos:e.cantidadAsientos,modeloId:e.modeloId},exitAnimationDuration:"1000ms"}).afterClosed().subscribe(c=>{this.cargar()})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(C.B),o.Y36(x.y),o.Y36(m.F0),o.Y36(d.uw))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-colectivo-list"]],decls:26,vars:3,consts:[[1,"animate__animated","animate__fadeIn"],[1,"header"],[1,"titulo"],["mat-flat-button","","color","accent",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patente"],["matColumnDef","cantidadAsientos"],["matColumnDef","modelo"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),o._uU(3,"Listado de Colectivos"),o.qZA(),o.TgZ(4,"button",3),o.NdJ("click",function(){return n.crear()}),o.TgZ(5,"mat-icon"),o._uU(6,"add"),o.qZA(),o._uU(7,"Nuevo Colectivo "),o.qZA()(),o.TgZ(8,"table",4),o.ynx(9,5),o.YNc(10,F,2,0,"th",6),o.YNc(11,U,2,1,"td",7),o.BQk(),o.ynx(12,8),o.YNc(13,q,2,0,"th",6),o.YNc(14,Y,2,1,"td",7),o.BQk(),o.ynx(15,9),o.YNc(16,O,2,0,"th",6),o.YNc(17,N,2,1,"td",7),o.BQk(),o.ynx(18,10),o.YNc(19,I,2,0,"th",6),o.YNc(20,P,2,1,"td",7),o.BQk(),o.ynx(21,11),o.YNc(22,J,2,0,"th",6),o.YNc(23,S,7,0,"td",7),o.BQk(),o.YNc(24,k,1,0,"tr",12),o.YNc(25,Q,1,0,"tr",13),o.qZA()()),2&e&&(o.xp6(8),o.Q6J("dataSource",n.dataSource),o.xp6(16),o.Q6J("matHeaderRowDef",n.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[u.lW,u.RK,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,h.Hw],styles:[y]}),t})(),D=(()=>{class t{constructor(e,n,c,s){this.dialogRef=e,this.data=n,this.cs=c,this.snackBar=s}eliminarColectivo(e){this.cs.borrar(e.id).subscribe(n=>{this.snackBar.open("Colectivo eliminado","Cerrar",{horizontalPosition:"center",verticalPosition:"top",duration:2500})},n=>{console.log(n),this.snackBar.open(n,"Cerrar")})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.so),o.Y36(d.WI),o.Y36(C.B),o.Y36(b.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["dialogo-eliminar"]],standalone:!0,features:[o.jDz],decls:24,vars:2,consts:[[1,"dialogo"],[1,"dialog-header"],["color","warn",1,"dialog-icon"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-content"],[1,"fila"],[1,"col1"],[1,"col2"],["mat-dialog-actions","",1,"dialog-actions"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-raised-button","","mat-dialog-close","","color","warn",3,"click"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),o._uU(3,"warning"),o.qZA(),o.TgZ(4,"h1",3)(5,"b"),o._uU(6,"\xbfEst\xe1 seguro/a de querer eliminar este colectivo?"),o.qZA()()(),o.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"span"),o._uU(11,"ID:"),o.qZA(),o.TgZ(12,"span"),o._uU(13,"Patente:"),o.qZA()(),o.TgZ(14,"div",7)(15,"span"),o._uU(16),o.qZA(),o.TgZ(17,"span"),o._uU(18),o.qZA()()()(),o.TgZ(19,"div",8)(20,"button",9),o._uU(21,"Atr\xe1s"),o.qZA(),o.TgZ(22,"button",10),o.NdJ("click",function(){return n.eliminarColectivo(n.data)}),o._uU(23,"Eliminar"),o.qZA()()()),2&e&&(o.xp6(16),o.Oqu(n.data.id),o.xp6(2),o.Oqu(n.data.patente))},dependencies:[l.u5,Z.q,u.lW,h.Hw,d.ZT,d.uh,d.xY,d.H8],styles:[y]}),t})();var g=a(3546),v=a(9549),L=a(4144),w=a(4850),E=a(4385),z=a(3238);function R(t,i){1&t&&(o.TgZ(0,"h2",12),o._uU(1,"Editando Colectivo"),o.qZA())}function H(t,i){1&t&&(o.TgZ(0,"h2",12),o._uU(1,"Creando Colectivo"),o.qZA())}function $(t,i){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," La patente es requerida "),o.qZA())}function j(t,i){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,$,3,0,"mat-hint",13),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.patente.errors)}}function G(t,i){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," La cantidad de asientos es requerida "),o.qZA())}function X(t,i){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," M\xednimo 1 asiento "),o.qZA())}function K(t,i){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," M\xe1ximo 70 asientos "),o.qZA())}function W(t,i){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,G,3,0,"mat-hint",13),o.YNc(2,X,3,0,"mat-hint",13),o.YNc(3,K,3,0,"mat-hint",13),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.cantidadAsientos.errors&&e.coleForm.controls.cantidadAsientos.errors.required),o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.cantidadAsientos.errors&&e.coleForm.controls.cantidadAsientos.errors.min),o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.cantidadAsientos.errors&&e.coleForm.controls.cantidadAsientos.errors.max)}}function V(t,i){if(1&t&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&t){const e=i.$implicit;o.Q6J("value",e.id),o.xp6(1),o.AsE(" ",null==e?null:e.marca," ",null==e?null:e.nombre," ")}}function oo(t,i){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Se requiere seleccione un modelo "),o.qZA())}function to(t,i){1&t&&(o.TgZ(0,"span"),o._uU(1,"Crear Colectivo"),o.qZA())}function eo(t,i){1&t&&(o.TgZ(0,"span"),o._uU(1,"Guardar Cambios"),o.qZA())}let M=(()=>{class t{constructor(e,n,c,s,p,lo){this.colectivoService=e,this.modeloService=n,this.route=c,this.router=s,this.fb=p,this.snackBar=lo,this.colectivoSelec=null,this.nuevo=!0,this.listaModelos=[],this.modeloSelec=null,this.coleForm=this.fb.group({patente:["",l.kI.required],cantidadAsientos:[0,[l.kI.required,l.kI.min(1),l.kI.max(70)]],modelo:[0,l.kI.required]})}ngOnInit(){this.route.paramMap.subscribe(e=>{const n=e.get("id");n&&(this.encontrarColectivo(Number(n)),this.nuevo=!1)}),this.modeloService.findAll().subscribe(e=>{e.body&&(this.listaModelos=e.body?.map(n=>new T.Z(n.id,n.marca,n.nombre)))},e=>{console.log("Ha ocurrido un error al cargar los modelos")})}encontrarColectivo(e){this.colectivoService.findOne(e).subscribe(n=>{n.body&&(this.colectivoSelec=new A._(n.body.id,n.body.patente,n.body.cantidadAsientos,n.body.modeloId),this.coleForm.patchValue({patente:this.colectivoSelec.patente,cantidadAsientos:this.colectivoSelec.cantidadAsientos,modelo:this.colectivoSelec.modeloId}))},n=>{console.log(n),this.snackBar.open(n,"Cerrar"),this.router.navigate(["layout","colectivo","lista"])})}volver(){this.router.navigate(["layout","colectivos","lista"])}guardarCambios(){const e={id:null,patente:this.coleForm.get("patente").value,cantidadAsientos:this.coleForm.get("cantidadAsientos").value,modeloId:this.coleForm.get("modelo").value};this.nuevo?this.colectivoService.crearColectivo(e).subscribe(n=>{this.snackBar.open("Colectivo creado exitosamente!","Cerrar",{horizontalPosition:"center",verticalPosition:"top",duration:2500}),this.router.navigate(["layout","colectivos","lista"])},n=>{console.log(n),this.snackBar.open(n,"Cerrar")}):(e.id=this.colectivoSelec.id,this.colectivoService.modifColectivo(e).subscribe(n=>{this.snackBar.open("Cambios guardados!","Cerrar",{horizontalPosition:"center",verticalPosition:"top",duration:2500}),this.router.navigate(["layout","colectivos","lista"])},n=>{console.log(n),this.snackBar.open(n,"Cerrar")}))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(C.B),o.Y36(x.y),o.Y36(m.gz),o.Y36(m.F0),o.Y36(l.qu),o.Y36(b.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-colectivo-modif"]],decls:29,vars:10,consts:[[1,"card","animate__animated","animate__fadeIn"],[1,"title"],["type","button","mat-icon-button","",1,"back",3,"click"],["class","titulo",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","type","text","formControlName","patente"],[4,"ngIf"],["matInput","","type","number","formControlName","cantidadAsientos"],["formControlName","modelo","required",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled"],[1,"titulo"],["class","hint",4,"ngIf"],[1,"hint"],[3,"value"]],template:function(e,n){1&e&&(o.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"button",2),o.NdJ("click",function(){return n.volver()}),o.TgZ(3,"mat-icon"),o._uU(4,"arrow_back"),o.qZA()(),o.YNc(5,R,2,0,"h2",3),o.YNc(6,H,2,0,"h2",3),o.qZA(),o.TgZ(7,"mat-card-content")(8,"form",4),o.NdJ("ngSubmit",function(){return n.guardarCambios()}),o.TgZ(9,"mat-form-field",5)(10,"mat-label"),o._uU(11,"Patente:"),o.qZA(),o._UZ(12,"input",6),o.YNc(13,j,2,1,"div",7),o.qZA(),o.TgZ(14,"mat-form-field",5)(15,"mat-label"),o._uU(16,"N\xb0 de asientos:"),o.qZA(),o._UZ(17,"input",8),o.YNc(18,W,4,3,"div",7),o.qZA(),o.TgZ(19,"mat-form-field",5)(20,"mat-label"),o._uU(21,"Modelo:"),o.qZA(),o.TgZ(22,"mat-select",9),o.YNc(23,V,2,3,"mat-option",10),o.qZA(),o.YNc(24,oo,2,0,"mat-error",7),o.qZA(),o.TgZ(25,"mat-card-actions")(26,"button",11),o.YNc(27,to,2,0,"span",7),o.YNc(28,eo,2,0,"span",7),o.qZA()()()()()),2&e&&(o.xp6(5),o.Q6J("ngIf",!n.nuevo),o.xp6(1),o.Q6J("ngIf",n.nuevo),o.xp6(2),o.Q6J("formGroup",n.coleForm),o.xp6(5),o.Q6J("ngIf",n.coleForm.controls.patente.invalid&&(n.coleForm.controls.patente.dirty||n.coleForm.controls.patente.touched)),o.xp6(5),o.Q6J("ngIf",n.coleForm.controls.cantidadAsientos.invalid&&(n.coleForm.controls.cantidadAsientos.dirty||n.coleForm.controls.cantidadAsientos.touched)),o.xp6(5),o.Q6J("ngForOf",n.listaModelos),o.xp6(1),o.Q6J("ngIf",n.coleForm&&n.coleForm.controls&&n.coleForm.controls.modelo.errors&&n.coleForm.controls.modelo.errors.required),o.xp6(2),o.Q6J("disabled",n.coleForm.invalid),o.xp6(1),o.Q6J("ngIf",n.nuevo),o.xp6(1),o.Q6J("ngIf",!n.nuevo))},dependencies:[f.sg,f.O5,g.a8,g.hq,g.dn,g.dk,u.lW,u.RK,v.KE,v.hX,v.bx,v.TO,L.Nt,w.d,h.Hw,E.gD,z.ey,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.sg,l.u],styles:[".card[_ngcontent-%COMP%]{display:flex;background-color:#869a9e;margin:1em auto;width:80%;flex-direction:column;border:1px solid #03151a;border-radius:15px}.title[_ngcontent-%COMP%]{display:flex;margin-bottom:25px}.back[_ngcontent-%COMP%]{align-self:center;position:absolute;color:#131263}.back[_ngcontent-%COMP%]:hover{background-color:#8989b1;color:#000}.titulo[_ngcontent-%COMP%]{margin:auto;color:#131263}form[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.form-field[_ngcontent-%COMP%]{display:flex;width:80%}.hint[_ngcontent-%COMP%]{color:red;font-size:small}"]}),t})();const no=[{path:"lista",component:B},{path:"modif/:id",component:M},{path:"crear",component:M},{path:"",redirectTo:"lista",pathMatch:"full"}];let io=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[f.ez,m.Bz.forChild(no),m.Bz]}),t})(),ao=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[f.ez,Z.q,l.u5,l.UX,io]}),t})()}}]);