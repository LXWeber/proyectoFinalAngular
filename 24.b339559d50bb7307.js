"use strict";(self.webpackChunkproyectoFinal=self.webpackChunkproyectoFinal||[]).push([[24],{24:(co,_,l)=>{l.r(_),l.d(_,{ColectivoAdminModule:()=>lo});var f=l(6895),Z=l(904),a=l(4006),m=l(9299),A=l(1741),T=l(4541),d=l(5412),o=l(4650),C=l(4345),b=l(9921),u=l(4859),r=l(7155),h=l(7392),x=l(7009);function F(t,n){1&t&&(o.TgZ(0,"th",13),o._uU(1,"ID"),o.qZA())}function U(t,n){if(1&t&&(o.TgZ(0,"td",14),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.xp6(1),o.Oqu(e.id)}}function q(t,n){1&t&&(o.TgZ(0,"th",13),o._uU(1,"Patente"),o.qZA())}function Y(t,n){if(1&t&&(o.TgZ(0,"td",14),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.xp6(1),o.Oqu(e.patente)}}function O(t,n){1&t&&(o.TgZ(0,"th",13),o._uU(1,"Asientos"),o.qZA())}function N(t,n){if(1&t&&(o.TgZ(0,"td",14),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.xp6(1),o.Oqu(e.cantidadAsientos)}}function I(t,n){1&t&&(o.TgZ(0,"th",13),o._uU(1,"Modelo"),o.qZA())}function P(t,n){if(1&t&&(o.TgZ(0,"td",14),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.xp6(1),o.Oqu(null==e.modelo?null:e.modelo.nombre)}}function J(t,n){1&t&&(o.TgZ(0,"th",13),o._uU(1,"Editar / Eliminar"),o.qZA())}function S(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"td",14)(1,"button",15),o.NdJ("click",function(){const s=o.CHM(e).$implicit,p=o.oxw();return o.KtG(p.modificar(s))}),o.TgZ(2,"mat-icon"),o._uU(3,"edit"),o.qZA()(),o.TgZ(4,"button",16),o.NdJ("click",function(){const s=o.CHM(e).$implicit,p=o.oxw();return o.KtG(p.dialogoEliminar(s))}),o.TgZ(5,"mat-icon"),o._uU(6,"delete"),o.qZA()()()}}function k(t,n){1&t&&o._UZ(0,"tr",17)}function Q(t,n){1&t&&o._UZ(0,"tr",18)}const y=".header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.titulo[_ngcontent-%COMP%]{color:#131263}.mat-column-id[_ngcontent-%COMP%], .mat-column-cantidadAsientos[_ngcontent-%COMP%], .mat-column-modelo[_ngcontent-%COMP%], .mat-column-acciones[_ngcontent-%COMP%]{text-align:center}.mat-column-id[_ngcontent-%COMP%]{border-right:1px solid currentColor;width:0;font-size:small;padding:0 10px 0 5px}.dialogo[_ngcontent-%COMP%]{border:1px solid #630a03;background-color:#c98f86;border-radius:5px}.dialog-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.dialog-icon[_ngcontent-%COMP%]{font-size:350%;margin-top:20px;height:max-content;width:max-content}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.fila[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.col1[_ngcontent-%COMP%]{display:flex;flex-direction:column}.col2[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1em}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-around}";let B=(()=>{class t{constructor(e,i,c,s){this.colectivoService=e,this.modeloService=i,this.router=c,this.dialog=s,this.displayedColumns=["id","patente","cantidadAsientos","modelo","acciones"],this.dataSource=[],this.listaColectivos=[],this.modeloSeleccionado=null}ngOnInit(){this.cargar()}cargar(){this.colectivoService.findAll().subscribe(e=>{this.dataSource=e.body?.map(i=>{const c=new A._(i.id,i.patente,i.cantidadAsientos,i.modeloId);return this.findModelo(c),c})},e=>{console.log("Ha ocurrido un error al cargar")})}findModelo(e){this.modeloService.findOne(e.modeloId).subscribe(i=>{i.body&&(e.modelo=new T.Z(i.body.id,i.body.nombre,i.body.marca))})}modificar(e){this.router.navigate(["layout","colectivos","modif",e.id])}crear(){this.router.navigate(["layout","colectivos","crear"])}dialogoEliminar(e){this.dialog.open(D,{data:{id:e.id,patente:e.patente,cantidadAsientos:e.cantidadAsientos,modeloId:e.modeloId},exitAnimationDuration:"1000ms"}).afterClosed().subscribe(c=>{this.cargar()})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(C.B),o.Y36(b.y),o.Y36(m.F0),o.Y36(d.uw))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-colectivo-list"]],decls:26,vars:3,consts:[[1,"header"],[1,"titulo"],["mat-flat-button","","color","accent",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","patente"],["matColumnDef","cantidadAsientos"],["matColumnDef","modelo"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"div",0)(2,"h1",1),o._uU(3,"Listado de Colectivos"),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){return i.crear()}),o.TgZ(5,"mat-icon"),o._uU(6,"add"),o.qZA(),o._uU(7,"Nuevo Colectivo "),o.qZA()(),o.TgZ(8,"table",3),o.ynx(9,4),o.YNc(10,F,2,0,"th",5),o.YNc(11,U,2,1,"td",6),o.BQk(),o.ynx(12,7),o.YNc(13,q,2,0,"th",5),o.YNc(14,Y,2,1,"td",6),o.BQk(),o.ynx(15,8),o.YNc(16,O,2,0,"th",5),o.YNc(17,N,2,1,"td",6),o.BQk(),o.ynx(18,9),o.YNc(19,I,2,0,"th",5),o.YNc(20,P,2,1,"td",6),o.BQk(),o.ynx(21,10),o.YNc(22,J,2,0,"th",5),o.YNc(23,S,7,0,"td",6),o.BQk(),o.YNc(24,k,1,0,"tr",11),o.YNc(25,Q,1,0,"tr",12),o.qZA()()),2&e&&(o.xp6(8),o.Q6J("dataSource",i.dataSource),o.xp6(16),o.Q6J("matHeaderRowDef",i.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[u.lW,u.RK,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,h.Hw],styles:[y]}),t})(),D=(()=>{class t{constructor(e,i,c,s){this.dialogRef=e,this.data=i,this.cs=c,this.snackBar=s}eliminarColectivo(e){this.cs.borrar(e.id).subscribe(i=>{this.snackBar.open("Colectivo eliminado","Cerrar",{horizontalPosition:"center",verticalPosition:"top",duration:2500})},i=>{console.log(i),this.snackBar.open(i,"Cerrar")})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.so),o.Y36(d.WI),o.Y36(C.B),o.Y36(x.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["dialogo-eliminar"]],standalone:!0,features:[o.jDz],decls:24,vars:2,consts:[[1,"dialogo"],[1,"dialog-header"],["color","warn",1,"dialog-icon"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-content"],[1,"fila"],[1,"col1"],[1,"col2"],["mat-dialog-actions","",1,"dialog-actions"],["mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""],["mat-raised-button","","mat-dialog-close","","color","warn",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),o._uU(3,"warning"),o.qZA(),o.TgZ(4,"h1",3)(5,"b"),o._uU(6,"\xbfEst\xe1 seguro/a de querer eliminar este colectivo?"),o.qZA()()(),o.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"span"),o._uU(11,"ID:"),o.qZA(),o.TgZ(12,"span"),o._uU(13,"Patente:"),o.qZA()(),o.TgZ(14,"div",7)(15,"span"),o._uU(16),o.qZA(),o.TgZ(17,"span"),o._uU(18),o.qZA()()()(),o.TgZ(19,"div",8)(20,"button",9),o._uU(21,"Atr\xe1s"),o.qZA(),o.TgZ(22,"button",10),o.NdJ("click",function(){return i.eliminarColectivo(i.data)}),o._uU(23,"Eliminar"),o.qZA()()()),2&e&&(o.xp6(16),o.Oqu(i.data.id),o.xp6(2),o.Oqu(i.data.patente))},dependencies:[a.u5,Z.q,u.lW,h.Hw,d.ZT,d.uh,d.xY,d.H8],styles:[y]}),t})();var v=l(3546),g=l(9549),L=l(4144),w=l(4850),E=l(4385),z=l(3238);function R(t,n){1&t&&(o.TgZ(0,"h2",12),o._uU(1,"Editando Colectivo"),o.qZA())}function H(t,n){1&t&&(o.TgZ(0,"h2",12),o._uU(1,"Creando Colectivo"),o.qZA())}function $(t,n){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," La patente es requerida "),o.qZA())}function j(t,n){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,$,3,0,"mat-hint",13),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.patente.errors)}}function G(t,n){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," La cantidad de asientos es requerida "),o.qZA())}function X(t,n){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," M\xednimo 1 asiento "),o.qZA())}function K(t,n){1&t&&(o.TgZ(0,"mat-hint",14),o._UZ(1,"mat-divider"),o._uU(2," M\xe1ximo 70 asientos "),o.qZA())}function W(t,n){if(1&t&&(o.TgZ(0,"div"),o.YNc(1,G,3,0,"mat-hint",13),o.YNc(2,X,3,0,"mat-hint",13),o.YNc(3,K,3,0,"mat-hint",13),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.cantidadAsientos.errors&&e.coleForm.controls.cantidadAsientos.errors.required),o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.cantidadAsientos.errors&&e.coleForm.controls.cantidadAsientos.errors.min),o.xp6(1),o.Q6J("ngIf",e.coleForm&&e.coleForm.controls&&e.coleForm.controls.cantidadAsientos.errors&&e.coleForm.controls.cantidadAsientos.errors.max)}}function V(t,n){if(1&t&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.Q6J("value",e.id),o.xp6(1),o.AsE(" ",null==e?null:e.marca," ",null==e?null:e.nombre," ")}}function oo(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Se requiere seleccione un modelo "),o.qZA())}function to(t,n){1&t&&(o.TgZ(0,"span"),o._uU(1,"Crear Colectivo"),o.qZA())}function eo(t,n){1&t&&(o.TgZ(0,"span"),o._uU(1,"Guardar Cambios"),o.qZA())}let M=(()=>{class t{constructor(e,i,c,s,p,ao){this.colectivoService=e,this.modeloService=i,this.route=c,this.router=s,this.fb=p,this.snackBar=ao,this.colectivoSelec=null,this.nuevo=!0,this.listaModelos=[],this.modeloSelec=null,this.coleForm=this.fb.group({patente:["",a.kI.required],cantidadAsientos:[0,[a.kI.required,a.kI.min(1),a.kI.max(70)]],modelo:[0,a.kI.required]})}ngOnInit(){this.route.paramMap.subscribe(e=>{const i=e.get("id");i&&(this.encontrarColectivo(Number(i)),this.nuevo=!1)}),this.modeloService.findAll().subscribe(e=>{e.body&&(this.listaModelos=e.body?.map(i=>new T.Z(i.id,i.marca,i.nombre)))},e=>{console.log("Ha ocurrido un error al cargar los modelos")})}encontrarColectivo(e){this.colectivoService.findOne(e).subscribe(i=>{i.body&&(this.colectivoSelec=new A._(i.body.id,i.body.patente,i.body.cantidadAsientos,i.body.modeloId),this.coleForm.patchValue({patente:this.colectivoSelec.patente,cantidadAsientos:this.colectivoSelec.cantidadAsientos,modelo:this.colectivoSelec.modeloId}))},i=>{console.log(i),this.snackBar.open(i,"Cerrar"),this.router.navigate(["layout","colectivo","lista"])})}volver(){this.router.navigate(["layout","colectivos","lista"])}guardarCambios(){const e={id:null,patente:this.coleForm.get("patente").value,cantidadAsientos:this.coleForm.get("cantidadAsientos").value,modeloId:this.coleForm.get("modelo").value};this.nuevo?this.colectivoService.crearColectivo(e).subscribe(i=>{this.snackBar.open("Colectivo creado exitosamente!","Cerrar",{horizontalPosition:"center",verticalPosition:"top",duration:2500}),this.router.navigate(["layout","colectivos","lista"])},i=>{console.log(i),this.snackBar.open(i,"Cerrar")}):(e.id=this.colectivoSelec.id,this.colectivoService.modifColectivo(e).subscribe(i=>{this.snackBar.open("Cambios guardados!","Cerrar",{horizontalPosition:"center",verticalPosition:"top",duration:2500}),this.router.navigate(["layout","colectivos","lista"])},i=>{console.log(i),this.snackBar.open(i,"Cerrar")}))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(C.B),o.Y36(b.y),o.Y36(m.gz),o.Y36(m.F0),o.Y36(a.qu),o.Y36(x.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-colectivo-modif"]],decls:29,vars:10,consts:[[1,"card"],[1,"title"],["type","button","mat-icon-button","",1,"back",3,"click"],["class","titulo",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-field"],["matInput","","type","text","formControlName","patente"],[4,"ngIf"],["matInput","","type","number","formControlName","cantidadAsientos"],["formControlName","modelo","required",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled"],[1,"titulo"],["class","hint",4,"ngIf"],[1,"hint"],[3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"button",2),o.NdJ("click",function(){return i.volver()}),o.TgZ(3,"mat-icon"),o._uU(4,"arrow_back"),o.qZA()(),o.YNc(5,R,2,0,"h2",3),o.YNc(6,H,2,0,"h2",3),o.qZA(),o.TgZ(7,"mat-card-content")(8,"form",4),o.NdJ("ngSubmit",function(){return i.guardarCambios()}),o.TgZ(9,"mat-form-field",5)(10,"mat-label"),o._uU(11,"Patente:"),o.qZA(),o._UZ(12,"input",6),o.YNc(13,j,2,1,"div",7),o.qZA(),o.TgZ(14,"mat-form-field",5)(15,"mat-label"),o._uU(16,"N\xb0 de asientos:"),o.qZA(),o._UZ(17,"input",8),o.YNc(18,W,4,3,"div",7),o.qZA(),o.TgZ(19,"mat-form-field",5)(20,"mat-label"),o._uU(21,"Modelo:"),o.qZA(),o.TgZ(22,"mat-select",9),o.YNc(23,V,2,3,"mat-option",10),o.qZA(),o.YNc(24,oo,2,0,"mat-error",7),o.qZA(),o.TgZ(25,"mat-card-actions")(26,"button",11),o.YNc(27,to,2,0,"span",7),o.YNc(28,eo,2,0,"span",7),o.qZA()()()()()),2&e&&(o.xp6(5),o.Q6J("ngIf",!i.nuevo),o.xp6(1),o.Q6J("ngIf",i.nuevo),o.xp6(2),o.Q6J("formGroup",i.coleForm),o.xp6(5),o.Q6J("ngIf",i.coleForm.controls.patente.invalid&&(i.coleForm.controls.patente.dirty||i.coleForm.controls.patente.touched)),o.xp6(5),o.Q6J("ngIf",i.coleForm.controls.cantidadAsientos.invalid&&(i.coleForm.controls.cantidadAsientos.dirty||i.coleForm.controls.cantidadAsientos.touched)),o.xp6(5),o.Q6J("ngForOf",i.listaModelos),o.xp6(1),o.Q6J("ngIf",i.coleForm&&i.coleForm.controls&&i.coleForm.controls.modelo.errors&&i.coleForm.controls.modelo.errors.required),o.xp6(2),o.Q6J("disabled",i.coleForm.invalid),o.xp6(1),o.Q6J("ngIf",i.nuevo),o.xp6(1),o.Q6J("ngIf",!i.nuevo))},dependencies:[f.sg,f.O5,v.a8,v.hq,v.dn,v.dk,u.lW,u.RK,g.KE,g.hX,g.bx,g.TO,L.Nt,w.d,h.Hw,E.gD,z.ey,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.sg,a.u],styles:[".card[_ngcontent-%COMP%]{display:flex;background-color:#869a9e;margin:1em auto;width:80%;flex-direction:column;border:1px solid #03151a;border-radius:15px}.title[_ngcontent-%COMP%]{display:flex;margin-bottom:25px}.back[_ngcontent-%COMP%]{align-self:center;position:absolute;color:#131263}.back[_ngcontent-%COMP%]:hover{background-color:#8989b1;color:#000}.titulo[_ngcontent-%COMP%]{margin:auto;color:#131263}form[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.form-field[_ngcontent-%COMP%]{display:flex;width:80%}.hint[_ngcontent-%COMP%]{color:red;font-size:small}"]}),t})();const io=[{path:"lista",component:B},{path:"modif/:id",component:M},{path:"crear",component:M},{path:"",redirectTo:"lista",pathMatch:"full"}];let no=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[f.ez,m.Bz.forChild(io),m.Bz]}),t})(),lo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[f.ez,Z.q,a.u5,a.UX,no]}),t})()}}]);